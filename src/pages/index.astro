---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_DESCRIPTION, SITE_TITLE, DOC_SOURCE_URL } from '../consts';
import { getEntry, render } from 'astro:content';

const doc = await getEntry('docs', 'filesystem');

if (!doc) {
	throw new Error('Filesystem doc is missing');
}

const { Content } = await render(doc);
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead
			title={doc.data.title ?? SITE_TITLE}
			description={doc.data.description ?? SITE_DESCRIPTION}
		/>
	</head>
	<body>
		<Header />
		<main>
			<header class="page-hero">
				<p class="eyebrow">{SITE_TITLE}</p>
				<h1>{doc.data.title}</h1>
				<p class="lede">{doc.data.description}</p>
				<div class="cta">
					<a class="button" href="#doc">Read online</a>
					<a class="ghost" href={doc.data.source ?? DOC_SOURCE_URL} target="_blank" rel="noreferrer"
						>View as Markdown</a
					>
				</div>
			</header>

			<article id="doc" class="doc">
				<Content />
			</article>
		</main>
		<Footer />
	</body>
</html>
